<mat-accordion>
	<mat-expansion-panel *ngFor="let event of events; let i = index" [expanded]="i === 0">
		<mat-expansion-panel-header>
			<mat-panel-title>
				{{event.viewEventInformation.title}}
			</mat-panel-title>
			<mat-panel-description fxFlex="nogrow" fxLayoutAlign="stretch center" *ngIf="event.latestAppointmentInformation">
				{{event.latestAppointmentInformation.startTime | date:'medium'}}
				<appointment-participation [readonly]="false" [currentResponse]="event.latestAppointmentInformation.currentResponse"
				[participantId]="currentUserId" [appointmentId]="event.latestAppointmentInformation.appointmentId"
				(selectedNewResponse)="eventChanged.emit()"></appointment-participation>
			</mat-panel-description>
		</mat-expansion-panel-header>
		<div>
			<event-info-display [info]="event.viewEventInformation"></event-info-display>
		</div>
		<mat-action-row fxLayoutGap="20px">
			<ng-container *ngIf="event.viewEventInformation.currentUserDoesParticipate; else notParticipatingTemplate">
				<button mat-raised-button (click)="leaveEvent(event.eventId)" color="warn" type="button">
					Verlassen
				</button>
			</ng-container>
			<ng-template #notParticipatingTemplate>
				<button mat-raised-button (click)="joinEvent(event.eventId)" color="primary" type="button">
					Teilnehmen
				</button>
			</ng-template>
			<button mat-raised-button color="primary" [routerLink]="['/ViewEvent', event.eventId]">
				Details
			</button>
			<button mat-raised-button color="primary" [routerLink]="['/EditEvent', event.eventId]" *ngIf="event.viewEventInformation.organizerId === currentUserId">
				Editieren
			</button>
		</mat-action-row>
	</mat-expansion-panel>
</mat-accordion>
